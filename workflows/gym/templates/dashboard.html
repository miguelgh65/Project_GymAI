{% extends 'layout.html' %}

{% block title %}RoonieColemAI - Dashboard de Análisis{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/dashboard.css">
{% endblock %}

{% block content %}
<div class="dashboard-container">
    <header class="dashboard-header">
        <h1><i class="fas fa-chart-line"></i> Dashboard de Análisis</h1>
        <p class="subtitle">Visualiza tu progreso y métricas de entrenamiento</p>
    </header>
    
    <div class="filter-section">
        <div class="filter-group">
            <label for="ejercicio-select">Ejercicio:</label>
            <select id="ejercicio-select" class="select-input">
                <option value="">Cargando ejercicios...</option>
            </select>
        </div>
        <div class="filter-group date-range">
            <label for="date-from">Desde:</label>
            <input type="date" id="date-from" class="date-input">
            <label for="date-to">Hasta:</label>
            <input type="date" id="date-to" class="date-input">
        </div>
        <button id="apply-filters" class="btn primary-btn">
            <i class="fas fa-filter"></i> Aplicar Filtros
        </button>
    </div>
    
    <div class="dashboard-grid">
        <!-- Tarjetas de métricas principales -->
        <div class="metric-cards">
            <div class="metric-card" id="card-sessions">
                <div class="metric-icon">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="metric-content">
                    <h3>Sesiones</h3>
                    <p class="metric-value">0</p>
                </div>
            </div>
            
            <div class="metric-card" id="card-max-weight">
                <div class="metric-icon">
                    <i class="fas fa-dumbbell"></i>
                </div>
                <div class="metric-content">
                    <h3>Peso Máximo</h3>
                    <p class="metric-value">0 kg</p>
                </div>
            </div>
            
            <div class="metric-card" id="card-progress">
                <div class="metric-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="metric-content">
                    <h3>Progreso</h3>
                    <p class="metric-value">0%</p>
                </div>
            </div>
            
            <div class="metric-card" id="card-volume">
                <div class="metric-icon">
                    <i class="fas fa-weight-hanging"></i>
                </div>
                <div class="metric-content">
                    <h3>Volumen Total</h3>
                    <p class="metric-value">0 kg</p>
                </div>
            </div>
        </div>
        
        <!-- Gráfico principal de progresión -->
        <div class="chart-container primary-chart">
            <h2>Progresión de Peso</h2>
            <canvas id="weight-progression-chart"></canvas>
        </div>
        
        <!-- Tabla de sesiones recientes -->
        <div class="table-container">
            <h2>Sesiones Recientes</h2>
            <div class="table-responsive">
                <table id="sessions-table">
                    <thead>
                        <tr>
                            <th>Fecha</th>
                            <th>Series</th>
                            <th>Peso Máx.</th>
                            <th>Repeticiones</th>
                            <th>Volumen</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr class="empty-state">
                            <td colspan="5">Selecciona un ejercicio para ver sus datos</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Gráfico de volumen de entrenamiento -->
        <div class="chart-container secondary-chart">
            <h2>Volumen de Entrenamiento</h2>
            <canvas id="volume-chart"></canvas>
        </div>
        
        <!-- Gráfico de repeticiones por serie -->
        <div class="chart-container secondary-chart">
            <h2>Repeticiones por Serie</h2>
            <canvas id="reps-chart"></canvas>
        </div>
        
        <!-- Mapa de calor de actividad -->
        <div class="chart-container full-width">
            <h2>Mapa de Actividad</h2>
            <div id="activity-heatmap"></div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Scripts para las gráficas y visualizaciones -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
<script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
<script src="/static/dashboard.js"></script>
{% endblock %}